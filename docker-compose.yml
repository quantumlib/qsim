services:
    qsim:
        platform: linux/amd64
        image: qsim
        container_name: qsim
        build:
            context: ./
            dockerfile: Dockerfile
        outputs:
        - type=docker
    qsim-cxx-tests:
        platform: linux/amd64
        image: qsim-cxx-tests
        container_name: qsim-cxx-tests
        build:
            context: ./
            dockerfile: tests/Dockerfile
        depends_on:
        - qsim
    qsim-py-tests:
        platform: linux/amd64
        image: qsim-py-tests
        container_name: qsim-py-tests
        build:
            context: ./
            dockerfile: pybind_interface/Dockerfile
        depends_on:
        - qsim

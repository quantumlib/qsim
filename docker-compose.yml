services:
    qsim-base-image:
        image: qsim-base
        platform: linux/amd64
        build:
            context: ./
            dockerfile: Dockerfile
            target: qsim-base

    qsim-cxx-tests-image:
        image: qsim-cxx-tests
        build:
            context: ./
            dockerfile: tests/Dockerfile
            target: qsim-cxx-tests
        depends_on:
          - qsim-base-image

    qsim-py-tests-image:
        image: qsim-py-tests
        build:
            context: ./
            dockerfile: pybind_interface/Dockerfile
            target: qsim-py-tests
        depends_on:
          - qsim-base-image
